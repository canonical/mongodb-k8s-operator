[32mINFO    [0m pytest_operator.plugin:plugin.py:903 Model status:

Model  Controller          Cloud/Region        Version  SLA          Timestamp
test   microk8s-localhost  microk8s/localhost  3.5.3    unsupported  01:58:23Z

App                   Version  Status   Scale  Charm        Channel      Rev  Address         Exposed  Message
local-config-server            waiting      1  mongodb-k8s                 0  10.152.183.58   no       installing agent
local-shard                    error        1  mongodb-k8s                 1  10.152.183.184  no       hook failed: "sharding-relation-changed"
remote-config-server           waiting      1  mongodb-k8s  latest/edge   55  10.152.183.214  no       installing agent
remote-shard                   error        1  mongodb-k8s  latest/edge   55  10.152.183.163  no       hook failed: "update-status"

Unit                     Workload  Agent  Address      Ports  Message
local-config-server/0*   waiting   idle   10.1.50.208         Waiting for shards to upgrade/downgrade to revision ad87f00-locally built.
local-shard/0*           error     idle   10.1.50.211         hook failed: "sharding-relation-changed"
remote-config-server/0*  waiting   idle   10.1.50.205         Waiting for shards to upgrade/downgrade to revision 55.
remote-shard/0*          error     idle   10.1.50.202         hook failed: "update-status"

[32mINFO    [0m pytest_operator.plugin:plugin.py:909 Juju error logs:

unit-remote-shard-0: 01:51:49 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:51:50 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:51:51 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:51:52 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:51:53 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:51:54 ERROR unit.remote-shard/0.juju-log database-peers:0: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:51:56 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:51:57 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:51:58 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:51:59 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:52:00 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:52:01 ERROR unit.remote-config-server/0.juju-log database-peers:1: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:52:58 ERROR unit.remote-shard/0.juju-log sharding:4: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:52:59 ERROR unit.remote-shard/0.juju-log sharding:4: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:53:00 ERROR unit.remote-shard/0.juju-log sharding:4: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:53:01 ERROR unit.remote-shard/0.juju-log sharding:4: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:53:01 ERROR unit.remote-shard/0.juju-log sharding:4: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:53:23 ERROR unit.remote-config-server/0.juju-log config-server:5: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:53:24 ERROR unit.remote-config-server/0.juju-log config-server:5: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-local-shard-0: 01:53:24 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:53:24 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-config-server-0: 01:53:24 ERROR unit.remote-config-server/0.juju-log config-server:5: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:53:25 ERROR unit.remote-config-server/0.juju-log config-server:5: Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-local-shard-0: 01:53:30 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:53:30 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-local-shard-0: 01:53:40 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:53:40 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-local-shard-0: 01:54:01 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:54:01 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-shard-0: 01:54:20 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:54:20 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:54:20 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-config-server-0: 01:54:21 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:54:25 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:54:25 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:54:26 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-shard-0: 01:54:36 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:54:36 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:54:36 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-local-shard-0: 01:54:42 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:54:42 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-shard-0: 01:54:57 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:54:57 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:54:57 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-config-server-0: 01:55:32 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:55:38 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:55:38 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:55:38 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-local-shard-0: 01:56:03 ERROR unit.local-shard/0.juju-log sharding:5: Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/main.py", line 45, in main
    return _main.main(charm_class=charm_class, use_juju_for_storage=use_juju_for_storage)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 543, in main
    manager.run()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/_main.py", line 134, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 857, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/venv/ops/framework.py", line 947, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 698, in _on_relation_changed
    if not self.pass_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 746, in pass_hook_checks
    if not self.pass_sanity_hook_checks(event):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v1/shards_interface.py", line 785, in pass_sanity_hook_checks
    if not self.charm.is_relation_feasible(self.relation_name):
  File "/var/lib/juju/agents/unit-local-shard-0/charm/./src/charm.py", line 1582, in is_relation_feasible
    if revision_mismatch_status := self.status.get_cluster_mismatched_revision_status():
  File "/var/lib/juju/agents/unit-local-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-local-shard-0: 01:56:03 ERROR juju.worker.uniter.operation hook "sharding-relation-changed" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-config-server-0: 01:56:21 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:56:57 ERROR unit.remote-shard/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-shard-0: 01:56:57 ERROR unit.remote-shard/0.juju-log Uncaught exception while in charm code:
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 1643, in <module>
    main(MongoDBCharm)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 553, in main
    manager.run()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 529, in run
    self._emit()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 518, in _emit
    _emit_charm_event(self.charm, self.dispatcher.event_name, self._juju_context)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/main.py", line 139, in _emit_charm_event
    event_to_emit.emit(*args, **kwargs)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 347, in emit
    framework._emit(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 853, in _emit
    self._reemit(event_path)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/venv/ops/framework.py", line 943, in _reemit
    custom_handler(event)
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/./src/charm.py", line 765, in _on_update_status
    if invalid_integration_status := self.status.get_invalid_integration_status():
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 239, in get_invalid_integration_status
    return self.get_cluster_mismatched_revision_status()
  File "/var/lib/juju/agents/unit-remote-shard-0/charm/lib/charms/mongodb/v0/set_status.py", line 267, in get_cluster_mismatched_revision_status
    self.get_config_server_name()
AttributeError: 'MongoDBStatusHandler' object has no attribute 'get_config_server_name'
unit-remote-shard-0: 01:56:57 ERROR juju.worker.uniter.operation hook "update-status" (via hook dispatching script: dispatch) failed: exit status 1
unit-remote-config-server-0: 01:57:13 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')
unit-remote-config-server-0: 01:58:02 ERROR unit.remote-config-server/0.juju-log Cannot initialize workload: PathError('not-found', 'stat /licenses/LICENSE-snap: no such file or directory')

[32mINFO    [0m pytest_operator.plugin:plugin.py:991 Forgetting model main...