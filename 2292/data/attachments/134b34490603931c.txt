[33mWARNING [0m juju.application:application.py:150 adding units to a container-based model not supported, auto-switching to scale
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  another-database/0 [idle] active: 
  another-database/1 [idle] active: 
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [executing] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] maintenance: installing charm software
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [executing] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] maintenance: installing charm software
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [idle] active: 
  mongodb-k8s/3 [idle] active: 
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [idle] active: 
  mongodb-k8s/3 [idle] active: 
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/1, False
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/1. Target unit name: mongodb-k8s/1, True
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66d3c5cec87c955140f088d1'}})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c5cec87c955140f088d1'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c5cec87c955140f088d1'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-3.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[])'
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [idle] active: 
  mongodb-k8s/3 [idle] active: 
  another-database/0 [idle] active: Primary
  another-database/1 [idle] active: 
  mongodb-k8s/0 [executing] active: 
  mongodb-k8s/1 [executing] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] active: 
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/1, False
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/1. Target unit name: mongodb-k8s/1, True
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66d3c609aa9b10cd1989bc59'}})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c609aa9b10cd1989bc59'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c609aa9b10cd1989bc59'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-2.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[])'
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: Primary
  mongodb-k8s/2 [idle] active: 
  another-database/0 [idle] active: Primary
  another-database/1 [idle] active: 
  mongodb-k8s/0 [executing] active: 
  mongodb-k8s/1 [executing] active: Primary
  mongodb-k8s/2 [executing] active: 
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/1, False
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/1. Target unit name: mongodb-k8s/1, True
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66d3c67f24558cea401e2aba'}})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c67f24558cea401e2aba'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66d3c67f24558cea401e2aba'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:206 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:M6UBpt2iIsdso0bbrEelqTVftYVLzddr@mongodb-k8s-0.mongodb-k8s-endpoints:27017,mongodb-k8s-1.mongodb-k8s-endpoints:27017/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:448 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:453 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:492 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:246 Done: 'namespace(failed=False, succeeded=True, data=[])'