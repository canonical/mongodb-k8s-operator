[33mWARNING [0m juju.application:application.py:150 adding units to a container-based model not supported, auto-switching to scale
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  another-database/0 [idle] active: 
  another-database/1 [idle] active: 
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [executing] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] maintenance: installing charm software
  mongodb-k8s/0 [executing] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] maintenance: installing charm software
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/0, True
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66bd5bfa3ce455ebc944e0af'}})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5bfa3ce455ebc944e0af'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5bfa3ce455ebc944e0af'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-3.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[])'
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: 
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [idle] active: 
  mongodb-k8s/3 [idle] active: 
  another-database/0 [idle] active: 
  another-database/1 [idle] active: 
  mongodb-k8s/0 [executing] active: 
  mongodb-k8s/1 [executing] active: 
  mongodb-k8s/2 [executing] active: 
  mongodb-k8s/3 [executing] active: 
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/0, True
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66bd5c35036160415835efa3'}})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5c35036160415835efa3'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5c35036160415835efa3'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-2.mongodb-k8s-endpoints,mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[])'
[32mINFO    [0m juju.model:model.py:2972 Waiting for model:
  application/0 [idle] active: received database credentials of the first database
  application/1 [idle] active: received database credentials of the first database
  mongodb-k8s/0 [idle] active: Primary
  mongodb-k8s/1 [idle] active: 
  mongodb-k8s/2 [idle] active: 
  another-database/0 [idle] active: Primary
  another-database/1 [idle] active: 
  mongodb-k8s/0 [executing] active: Primary
  mongodb-k8s/1 [executing] active: 
  mongodb-k8s/2 [executing] active: 
[32mINFO    [0m integration.ha_tests.helpers:helpers.py:340 Unit name: mongodb-k8s/0. Target unit name: mongodb-k8s/0, True
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'var ubuntu = {"release_name": "Focal Fossa", "version": "20.04", "LTS": "true"}; EJSON.stringify(db.test_collection.insertOne(ubuntu), );\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': {'$oid': '66bd5cabe54153f1c9ef9f2b'}})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5cabe54153f1c9ef9f2b'}, 'release_name': 'Focal Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.updateOne({"version": "20.04"}, {"$set": {"release_name": "Fancy Fossa"}}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'insertedId': None, 'matchedCount': 1, 'modifiedCount': 1, 'upsertedCount': 0})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[{'_id': {'$oid': '66bd5cabe54153f1c9ef9f2b'}, 'release_name': 'Fancy Fossa'}])'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.deleteOne({"release_name": "Fancy Fossa"}))\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data={'acknowledged': True, 'deletedCount': 1})'
[32mINFO    [0m integration.helpers:helpers.py:196 Running mongo command: 'mongosh --quiet --eval \'EJSON.stringify(db.test_collection.find({}, {"release_name": 1}).toArray())\' "mongodb://relation-2:jscpAX6n6BRgDnjoZWGYLlQm97jaESnb@mongodb-k8s-0.mongodb-k8s-endpoints,mongodb-k8s-1.mongodb-k8s-endpoints/application_first_database?replicaSet=mongodb-k8s&authSource=admin"'
[32mINFO    [0m integration.helpers:helpers.py:438 Checking or creating helper mongo pod ...
[32mINFO    [0m integration.helpers:helpers.py:443 pod 'mongodb-helper' in namespace 'test' already exists.
[32mINFO    [0m integration.helpers:helpers.py:482 Checking pod mongodb-helper is ready...
[32mINFO    [0m integration.helpers:helpers.py:236 Done: 'namespace(failed=False, succeeded=True, data=[])'