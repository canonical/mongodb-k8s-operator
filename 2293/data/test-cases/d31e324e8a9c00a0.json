{"uid":"d31e324e8a9c00a0","name":"test_unconventual_shard_removal","fullName":"tests.integration.sharding_tests.test_sharding#test_unconventual_shard_removal","historyId":"2d1452a6e8ebc93a01abf92d108d01a4","time":{"start":1725242678806,"stop":1725243551112,"duration":872306},"description":"Tests that removing a shard application safely drains data.\n\n    It is preferred that users remove-relations instead of removing shard applications. But we do\n    support removing shard applications in a safe way.\n    ","descriptionHtml":"<p>Tests that removing a shard application safely drains data.</p>\n<pre><code>It is preferred that users remove-relations instead of removing shard applications. But we do\nsupport removing shard applications in a safe way.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1725240826699,"stop":1725240826700,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1725240826700,"stop":1725240826939,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1725240826700,"stop":1725240826700,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1725242678806,"stop":1725242678806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Tests that removing a shard application safely drains data.\n\n    It is preferred that users remove-relations instead of removing shard applications. But we do\n    support removing shard applications in a safe way.\n    ","status":"passed","steps":[],"attachments":[{"uid":"348d6ffa9109b2f","name":"log","source":"348d6ffa9109b2f.txt","type":"text/plain","size":14990}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1725243551112,"stop":1725243551112,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1725243551113,"stop":1725243551497,"duration":384},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1725243551497,"stop":1725243551497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1725243551497,"stop":1725243551497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1725243551498,"stop":1725243551498,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.sharding_tests"},{"name":"suite","value":"test_sharding"},{"name":"host","value":"fv-az698-412"},{"name":"thread","value":"13574-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.sharding_tests.test_sharding"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"df4042e098470ded","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":30,"unknown":0,"total":33},"items":[{"uid":"be780c7af571a320","reportUrl":"../2292//#testresult/be780c7af571a320","status":"passed","time":{"start":1725155969934,"stop":1725156402167,"duration":432233}},{"uid":"114f190d10c29061","reportUrl":"../2291//#testresult/114f190d10c29061","status":"passed","time":{"start":1725069403829,"stop":1725070185977,"duration":782148}},{"uid":"8498e0ff44983905","reportUrl":"../2285//#testresult/8498e0ff44983905","status":"passed","time":{"start":1724982652072,"stop":1724982843415,"duration":191343}},{"uid":"b02766ddf798e0c","reportUrl":"../2281//#testresult/b02766ddf798e0c","status":"passed","time":{"start":1724896474212,"stop":1724896987201,"duration":512989}},{"uid":"44dd2bd3490360a5","reportUrl":"../2258//#testresult/44dd2bd3490360a5","status":"passed","time":{"start":1724810567123,"stop":1724811189629,"duration":622506}},{"uid":"13af2ecb676ce5ae","reportUrl":"../2243//#testresult/13af2ecb676ce5ae","status":"passed","time":{"start":1724723773060,"stop":1724724084742,"duration":311682}},{"uid":"62aa3877d95c9bbf","reportUrl":"../2231//#testresult/62aa3877d95c9bbf","status":"passed","time":{"start":1724637641955,"stop":1724638103759,"duration":461804}},{"uid":"e8dd26f2589100c2","reportUrl":"../2229//#testresult/e8dd26f2589100c2","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nshard-two/0 [idle] waiting: Waiting for primary re-election..\n  shard-two/1 [executing] maintenance: stopping charm software","time":{"start":1724550782926,"stop":1724551619288,"duration":836362}},{"uid":"369a5981a69c4ae8","reportUrl":"../2228//#testresult/369a5981a69c4ae8","status":"passed","time":{"start":1724464668773,"stop":1724465501464,"duration":832691}},{"uid":"c8042325c5aa1b14","reportUrl":"../2209//#testresult/c8042325c5aa1b14","status":"passed","time":{"start":1724377880048,"stop":1724378211205,"duration":331157}},{"uid":"c20ef4877b57556f","reportUrl":"../2198//#testresult/c20ef4877b57556f","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nshard-two/0 [idle] waiting: Waiting for primary re-election..\n  shard-two/1 [executing] maintenance: stopping charm software","time":{"start":1724291682062,"stop":1724292518337,"duration":836275}},{"uid":"11cd52d7ed9f3cb","reportUrl":"../2194//#testresult/11cd52d7ed9f3cb","status":"passed","time":{"start":1724205012389,"stop":1724205474710,"duration":462321}},{"uid":"3a5e6c4d5ad9e6c8","reportUrl":"../2143//#testresult/3a5e6c4d5ad9e6c8","status":"passed","time":{"start":1724119336097,"stop":1724119758116,"duration":422019}},{"uid":"11b57b57c6f76b4","reportUrl":"../2124//#testresult/11b57b57c6f76b4","status":"passed","time":{"start":1724032891206,"stop":1724033463128,"duration":571922}},{"uid":"e922b61fd3903c61","reportUrl":"../2123//#testresult/e922b61fd3903c61","status":"passed","time":{"start":1723946334936,"stop":1723947177102,"duration":842166}},{"uid":"9e4297ffad3d4457","reportUrl":"../2122//#testresult/9e4297ffad3d4457","status":"passed","time":{"start":1723860013458,"stop":1723860353856,"duration":340398}},{"uid":"a3ea5762f7d493a0","reportUrl":"../2103//#testresult/a3ea5762f7d493a0","status":"passed","time":{"start":1723773507306,"stop":1723774398564,"duration":891258}},{"uid":"beb60bd650ddab05","reportUrl":"../2101//#testresult/beb60bd650ddab05","status":"broken","statusDetails":"juju.errors.JujuAPIError: cannot add relation \"shard-two:sharding config-server-one:config-server\": relation shard-two:sharding config-server-one:config-server is dying, but not yet removed","time":{"start":1723686353665,"stop":1723686353672,"duration":7}},{"uid":"75303cff8964c6af","reportUrl":"../2074//#testresult/75303cff8964c6af","status":"passed","time":{"start":1723600703712,"stop":1723601005221,"duration":301509}},{"uid":"a2bb682df0cbc65","reportUrl":"../2061//#testresult/a2bb682df0cbc65","status":"passed","time":{"start":1723514828395,"stop":1723515129752,"duration":301357}}]},"tags":["asyncio","group(1)"]},"source":"d31e324e8a9c00a0.json","parameterValues":[]}