{"uid":"13af2ecb676ce5ae","name":"test_unconventual_shard_removal","fullName":"tests.integration.sharding_tests.test_sharding#test_unconventual_shard_removal","historyId":"2d1452a6e8ebc93a01abf92d108d01a4","time":{"start":1724723773060,"stop":1724724084742,"duration":311682},"description":"Tests that removing a shard application safely drains data.\n\n    It is preferred that users remove-relations instead of removing shard applications. But we do\n    support removing shard applications in a safe way.\n    ","descriptionHtml":"<p>Tests that removing a shard application safely drains data.</p>\n<pre><code>It is preferred that users remove-relations instead of removing shard applications. But we do\nsupport removing shard applications in a safe way.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1724722400306,"stop":1724722400306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1724722400306,"stop":1724722400306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1724722400307,"stop":1724722400541,"duration":234},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1724723773060,"stop":1724723773060,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Tests that removing a shard application safely drains data.\n\n    It is preferred that users remove-relations instead of removing shard applications. But we do\n    support removing shard applications in a safe way.\n    ","status":"passed","steps":[],"attachments":[{"uid":"8b0a32b3e19b3a4a","name":"log","source":"8b0a32b3e19b3a4a.txt","type":"text/plain","size":13871}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1724724084743,"stop":1724724084743,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1724724084743,"stop":1724724085122,"duration":379},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1724724085123,"stop":1724724085123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1724724085123,"stop":1724724085123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1724724085123,"stop":1724724085123,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.sharding_tests"},{"name":"suite","value":"test_sharding"},{"name":"host","value":"fv-az774-338"},{"name":"thread","value":"13011-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.sharding_tests.test_sharding"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"84a28398b537a0f6","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":24,"unknown":0,"total":27},"items":[{"uid":"62aa3877d95c9bbf","reportUrl":"../2231//#testresult/62aa3877d95c9bbf","status":"passed","time":{"start":1724637641955,"stop":1724638103759,"duration":461804}},{"uid":"e8dd26f2589100c2","reportUrl":"../2229//#testresult/e8dd26f2589100c2","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nshard-two/0 [idle] waiting: Waiting for primary re-election..\n  shard-two/1 [executing] maintenance: stopping charm software","time":{"start":1724550782926,"stop":1724551619288,"duration":836362}},{"uid":"369a5981a69c4ae8","reportUrl":"../2228//#testresult/369a5981a69c4ae8","status":"passed","time":{"start":1724464668773,"stop":1724465501464,"duration":832691}},{"uid":"c8042325c5aa1b14","reportUrl":"../2209//#testresult/c8042325c5aa1b14","status":"passed","time":{"start":1724377880048,"stop":1724378211205,"duration":331157}},{"uid":"c20ef4877b57556f","reportUrl":"../2198//#testresult/c20ef4877b57556f","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nshard-two/0 [idle] waiting: Waiting for primary re-election..\n  shard-two/1 [executing] maintenance: stopping charm software","time":{"start":1724291682062,"stop":1724292518337,"duration":836275}},{"uid":"11cd52d7ed9f3cb","reportUrl":"../2194//#testresult/11cd52d7ed9f3cb","status":"passed","time":{"start":1724205012389,"stop":1724205474710,"duration":462321}},{"uid":"3a5e6c4d5ad9e6c8","reportUrl":"../2143//#testresult/3a5e6c4d5ad9e6c8","status":"passed","time":{"start":1724119336097,"stop":1724119758116,"duration":422019}},{"uid":"11b57b57c6f76b4","reportUrl":"../2124//#testresult/11b57b57c6f76b4","status":"passed","time":{"start":1724032891206,"stop":1724033463128,"duration":571922}},{"uid":"e922b61fd3903c61","reportUrl":"../2123//#testresult/e922b61fd3903c61","status":"passed","time":{"start":1723946334936,"stop":1723947177102,"duration":842166}},{"uid":"9e4297ffad3d4457","reportUrl":"../2122//#testresult/9e4297ffad3d4457","status":"passed","time":{"start":1723860013458,"stop":1723860353856,"duration":340398}},{"uid":"a3ea5762f7d493a0","reportUrl":"../2103//#testresult/a3ea5762f7d493a0","status":"passed","time":{"start":1723773507306,"stop":1723774398564,"duration":891258}},{"uid":"beb60bd650ddab05","reportUrl":"../2101//#testresult/beb60bd650ddab05","status":"broken","statusDetails":"juju.errors.JujuAPIError: cannot add relation \"shard-two:sharding config-server-one:config-server\": relation shard-two:sharding config-server-one:config-server is dying, but not yet removed","time":{"start":1723686353665,"stop":1723686353672,"duration":7}},{"uid":"75303cff8964c6af","reportUrl":"../2074//#testresult/75303cff8964c6af","status":"passed","time":{"start":1723600703712,"stop":1723601005221,"duration":301509}},{"uid":"a2bb682df0cbc65","reportUrl":"../2061//#testresult/a2bb682df0cbc65","status":"passed","time":{"start":1723514828395,"stop":1723515129752,"duration":301357}},{"uid":"7975ef10fb74aa5a","reportUrl":"../2053//#testresult/7975ef10fb74aa5a","status":"passed","time":{"start":1723428685565,"stop":1723429226355,"duration":540790}},{"uid":"779f76675e21e5bc","reportUrl":"../2048//#testresult/779f76675e21e5bc","status":"passed","time":{"start":1723341794990,"stop":1723342397604,"duration":602614}},{"uid":"a65108f096f0e2bd","reportUrl":"../2047//#testresult/a65108f096f0e2bd","status":"passed","time":{"start":1723256207905,"stop":1723256789587,"duration":581682}},{"uid":"e99ed0a10548f259","reportUrl":"../2040//#testresult/e99ed0a10548f259","status":"passed","time":{"start":1723169188438,"stop":1723169799364,"duration":610926}},{"uid":"83604aef45c6fb22","reportUrl":"../2030//#testresult/83604aef45c6fb22","status":"passed","time":{"start":1723082982729,"stop":1723083253914,"duration":271185}},{"uid":"37e3738339eb5f85","reportUrl":"../2026//#testresult/37e3738339eb5f85","status":"passed","time":{"start":1722996088138,"stop":1722996330369,"duration":242231}}]},"tags":["asyncio","group(1)"]},"source":"13af2ecb676ce5ae.json","parameterValues":[]}